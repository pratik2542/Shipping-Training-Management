{"version":3,"file":"static/js/706.ae877c17.chunk.js","mappings":"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","sources":["components/Login.js","config/api.js","utils/firebaseAuthApi.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Paper, Avatar, Box, TextField, Button, Typography, Container, Divider } from '@mui/material';\r\nimport { signInWithEmailAndPassword } from 'firebase/auth';\r\nimport { auth } from '../firebase/config';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\r\nimport { createUserWithEmailAndPassword } from 'firebase/auth';\r\nimport { testAuth } from '../firebase/testConfig';\r\nimport { collection, addDoc, query, where, getDocs } from 'firebase/firestore';\r\nimport { db } from '../firebase/config';\r\nimport HelpIcon from '@mui/icons-material/Help';\r\nimport { Tooltip, IconButton } from '@mui/material';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport { getApiUrl } from '../config/api';\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport LockResetIcon from '@mui/icons-material/LockReset';\r\nimport { verifyEmail } from '../utils/firebaseAuthApi';\r\n\r\nconst ADMIN_EMAILS = ['pratikmak2542@gmail.com']; // Add your admin emails here\r\n\r\nconst Login = () => {\r\n  // Add this console log to verify which API URL is being used\r\n  console.log('API URL:', process.env.REACT_APP_API_URL);\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [name, setName] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [showTestSignup, setShowTestSignup] = useState(false);\r\n  const [showRegister, setShowRegister] = useState(false);\r\n  const [isTestUser, setIsTestUser] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const buttonStyles = {\r\n    py: 1.5,\r\n    fontSize: '1rem',\r\n    fontWeight: 500,\r\n    height: '48px',\r\n    textTransform: 'none', // Prevents all-caps\r\n    letterSpacing: '0.3px',\r\n    '&:hover': {\r\n      transform: 'translateY(-2px)',\r\n      transition: 'transform 0.2s',\r\n    }\r\n  };\r\n\r\n  const outlinedButtonStyles = {\r\n    ...buttonStyles,\r\n    borderColor: 'primary.main',\r\n    '&:hover': {\r\n      ...buttonStyles['&:hover'],\r\n      borderColor: 'primary.dark',\r\n      backgroundColor: 'rgba(25, 118, 210, 0.04)'\r\n    }\r\n  };\r\n\r\n  const utilityButtonStyles = {\r\n    ...buttonStyles,\r\n    height: '42px',\r\n    backgroundColor: 'white',\r\n    color: 'primary.main',\r\n    border: '1px solid',\r\n    borderColor: 'primary.light',\r\n    fontWeight: 400,\r\n    fontSize: '0.9rem',\r\n    boxShadow: '0 2px 4px rgba(0,0,0,0.05)',\r\n    '& .MuiButton-startIcon': {\r\n      marginRight: 1\r\n    },\r\n    '&:hover': {\r\n      backgroundColor: 'primary.main',\r\n      color: 'white',\r\n      boxShadow: '0 4px 8px rgba(0,0,0,0.1)',\r\n      transform: 'translateY(-2px)',\r\n      transition: 'all 0.2s ease-in-out'\r\n    },\r\n    minWidth: 130, // Ensure enough width for text\r\n    whiteSpace: 'nowrap', // Prevent text wrapping\r\n  };\r\n\r\n  const sendAdminNotification = async (userData) => {\r\n    console.log('Sending notification data:', userData);\r\n    \r\n    try {\r\n      const response = await fetch(getApiUrl('notify-admin'), {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          name: userData.name,\r\n          email: userData.email\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Failed to send notification');\r\n      }\r\n\r\n      const data = await response.json();\r\n      console.log('Server response:', data);\r\n      return data;\r\n    } catch (error) {\r\n      console.error('Notification error:', error);\r\n      throw new Error('Failed to send registration notification. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleRegister = async (e) => {\r\n    e.preventDefault();\r\n    if (isSubmitting) return; // Prevent multiple submissions\r\n\r\n    setIsSubmitting(true); // Start loading\r\n    setError(''); // Clear previous errors\r\n\r\n    try {\r\n      // Check if email exists in Firebase Auth using the secure helper\r\n      const emailCheckResult = await verifyEmail(email);\r\n      \r\n      if (emailCheckResult.registered === true) {\r\n        setError('An account with this email already exists. Please log in instead.');\r\n        setIsSubmitting(false);\r\n        return;\r\n      }\r\n      \r\n      // Check if user already has a pending request\r\n      const existingRequestQuery = query(\r\n        collection(db, 'userRequests'),\r\n        where('email', '==', email)\r\n      );\r\n      \r\n      const existingRequestDocs = await getDocs(existingRequestQuery);\r\n      \r\n      // Check if there's any request (pending, approved, or rejected)\r\n      if (!existingRequestDocs.empty) {\r\n        // Find if there's an approved request\r\n        const approvedRequest = existingRequestDocs.docs.find(doc => \r\n          doc.data().status === 'approved'\r\n        );\r\n        \r\n        // Find if there's a pending request\r\n        const pendingRequest = existingRequestDocs.docs.find(doc => \r\n          doc.data().status === 'pending'\r\n        );\r\n        \r\n        if (approvedRequest) {\r\n          setError('This email is already registered and approved. Please log in instead.');\r\n          setIsSubmitting(false);\r\n          return;\r\n        }\r\n        \r\n        if (pendingRequest) {\r\n          setError('You already have a pending registration request. Please wait for approval.');\r\n          setIsSubmitting(false);\r\n          return;\r\n        }\r\n        \r\n        // If only rejected requests exist, allow to re-register\r\n      }\r\n\r\n      const userRequest = {\r\n        name,\r\n        email,\r\n        status: 'pending',\r\n        createdAt: new Date().toISOString(),\r\n        isTestUser: false\r\n      };\r\n\r\n      // Try to send notification first\r\n      await sendAdminNotification(userRequest);\r\n      \r\n      // Only add to Firebase if notification succeeds\r\n      await addDoc(collection(db, 'userRequests'), userRequest);\r\n\r\n      alert('Registration request submitted successfully.');\r\n      navigate('/pending-status', { state: { email } });\r\n      \r\n    } catch (error) {\r\n      console.error('Registration failed:', error);\r\n      setError(`Registration failed: ${error.message}`);\r\n    } finally {\r\n      setIsSubmitting(false); // End loading\r\n    }\r\n  };\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      // Sign in user\r\n      await signInWithEmailAndPassword(auth, email, password);\r\n      \r\n      // If using temporary password, redirect to reset\r\n      if (password === 'tempPassword123') {\r\n        navigate('/reset-password', { state: { fromTempPassword: true } });\r\n        return;\r\n      }\r\n\r\n      // Check if user is admin\r\n      if (ADMIN_EMAILS.includes(email)) {\r\n        // Store admin email for later use in auth operations\r\n        localStorage.setItem('adminEmail', email);\r\n        localStorage.setItem('isAdmin', 'true');\r\n        \r\n        // Check for pending requests\r\n        const pendingQuery = query(\r\n          collection(db, 'userRequests'),\r\n          where('status', '==', 'pending')\r\n        );\r\n        const pendingSnapshot = await getDocs(pendingQuery);\r\n        \r\n        // Only redirect to verify page if there are pending requests\r\n        if (pendingSnapshot.size > 0) {\r\n          navigate('/admin/verify');\r\n        } else {\r\n          navigate('/dashboard');\r\n        }\r\n        return;\r\n      }\r\n\r\n      // For test users, use test auth and mark them as test users\r\n      if (isTestUser) {\r\n        await signInWithEmailAndPassword(testAuth, email, password);\r\n        localStorage.setItem('isTestUser', 'true');\r\n      } else {\r\n        // Sign in and get user credentials\r\n        await signInWithEmailAndPassword(auth, email, password);\r\n        \r\n        // Check if user is approved\r\n        const userQuery = query(\r\n          collection(db, 'userRequests'),\r\n          where('email', '==', email),\r\n          where('status', '==', 'pending')\r\n        );\r\n        const userSnapshot = await getDocs(userQuery);\r\n        \r\n        if (!userSnapshot.empty) {\r\n          await auth.signOut(); // Sign out if not approved\r\n          setError('Your account is pending approval. Please wait for admin verification.');\r\n          return;\r\n        }\r\n\r\n        localStorage.removeItem('isAdmin');\r\n        localStorage.removeItem('isTestUser');\r\n        navigate('/dashboard');\r\n      }\r\n    } catch (error) {\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  const handleTestSignup = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      // Always create test users with testAuth and mark them as test users\r\n      await createUserWithEmailAndPassword(testAuth, email, password);\r\n      localStorage.setItem('isTestUser', 'true');\r\n      navigate('/dashboard');\r\n    } catch (error) {\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <Paper\r\n        elevation={3}\r\n        sx={{\r\n          marginTop: 8,\r\n          padding: 4,\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n        }}\r\n      >\r\n        <Avatar sx={{ m: 1, bgcolor: 'primary.main' }}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\" sx={{ mb: 3 }}>\r\n          {showRegister ? 'Register' : showTestSignup ? 'Create Test Account' : 'Sign in'}\r\n        </Typography>\r\n        {error && (\r\n          <Typography color=\"error\" sx={{ mb: 2 }}>\r\n            {error}\r\n          </Typography>\r\n        )}\r\n        <Box component=\"form\" onSubmit={showRegister ? handleRegister : showTestSignup ? handleTestSignup : handleLogin} sx={{ mt: 1 }}>\r\n          {showRegister ? (\r\n            <>\r\n              <TextField\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                label=\"Full Name\"\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n                sx={{ mb: 2 }}\r\n              />\r\n              <Box sx={{ position: 'relative' }}>\r\n                <TextField\r\n                  margin=\"normal\"\r\n                  required\r\n                  fullWidth\r\n                  label=\"Email Address\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  sx={{ mb: 3 }}\r\n                />\r\n                <Tooltip \r\n                  title=\"After your registration is approved, you'll receive an email with a temporary password to log in.\"\r\n                  arrow\r\n                  placement=\"top\"\r\n                >\r\n                  <IconButton \r\n                    sx={{ \r\n                      position: 'absolute', \r\n                      right: -40, \r\n                      top: '50%', \r\n                      transform: 'translateY(-50%)'\r\n                    }}\r\n                  >\r\n                    <HelpIcon color=\"primary\" fontSize=\"small\" />\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </Box>\r\n              <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                sx={{ ...buttonStyles, mt: 3, mb: 2 }}\r\n                disabled={isSubmitting}\r\n              >\r\n                {isSubmitting ? (\r\n                  <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                    <CircularProgress size={24} sx={{ mr: 1 }} />\r\n                    Registering...\r\n                  </Box>\r\n                ) : (\r\n                  'Register'\r\n                )}\r\n              </Button>\r\n              <Button\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                onClick={() => {\r\n                  setShowRegister(false);\r\n                  setName('');\r\n                }}\r\n                sx={{ ...outlinedButtonStyles, mt: 1 }}\r\n              >\r\n                Back to Login\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <TextField\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                label=\"Email Address\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                sx={{ mb: 2 }}\r\n              />\r\n              <TextField\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                sx={{ mb: 3 }}\r\n              />\r\n              {!showTestSignup && !showRegister ? (\r\n                <>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    fullWidth\r\n                    variant=\"contained\"\r\n                    sx={buttonStyles}\r\n                  >\r\n                    Sign In\r\n                  </Button>\r\n                  \r\n                  {/* Updated utility buttons container with adjusted spacing */}\r\n                  <Box sx={{ \r\n                    display: 'flex', \r\n                    justifyContent: 'space-between', // Use space-between instead of gap\r\n                    mt: 3, \r\n                    mb: 3,\r\n                    width: '100%'\r\n                  }}>\r\n                    <Button\r\n                      sx={{\r\n                        ...utilityButtonStyles,\r\n                        flex: '1 1 45%', // Allocate proper space\r\n                        mr: 1 // Add margin right\r\n                      }}\r\n                      onClick={() => navigate('/check-status')}\r\n                      startIcon={<SearchIcon sx={{ fontSize: 20 }} />}\r\n                    >\r\n                      Check Status\r\n                    </Button>\r\n                    <Button\r\n                      sx={{\r\n                        ...utilityButtonStyles,\r\n                        flex: '1 1 45%', // Allocate proper space\r\n                        ml: 1 // Add margin left\r\n                      }}\r\n                      onClick={() => navigate('/forgot-password')}\r\n                      startIcon={<LockResetIcon sx={{ fontSize: 20 }} />}\r\n                    >\r\n                      Reset Password\r\n                    </Button>\r\n                  </Box>\r\n\r\n                  <Divider sx={{ my: 2 }}>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      or\r\n                    </Typography>\r\n                  </Divider>\r\n\r\n                  <Button\r\n                    fullWidth\r\n                    variant=\"outlined\"\r\n                    onClick={() => setShowRegister(true)}\r\n                    sx={{ ...outlinedButtonStyles, mb: 1 }}\r\n                  >\r\n                    Create Account\r\n                  </Button>\r\n                  <Button\r\n                    fullWidth\r\n                    variant=\"outlined\"\r\n                    onClick={() => {\r\n                      setShowTestSignup(true);\r\n                      setIsTestUser(true);\r\n                    }}\r\n                    sx={outlinedButtonStyles}\r\n                  >\r\n                    Create Test Account\r\n                  </Button>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    fullWidth\r\n                    variant=\"contained\"\r\n                    color=\"warning\"\r\n                    sx={{ ...buttonStyles, mt: 3, mb: 2 }}\r\n                  >\r\n                    Create Test Account\r\n                  </Button>\r\n                  <Button\r\n                    fullWidth\r\n                    variant=\"outlined\"\r\n                    onClick={() => {\r\n                      setShowTestSignup(false);\r\n                      setIsTestUser(false);\r\n                    }}\r\n                    sx={{ ...outlinedButtonStyles, mt: 1 }}\r\n                  >\r\n                    Back to Login\r\n                  </Button>\r\n                </>\r\n              )}\r\n            </>\r\n          )}\r\n        </Box>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Login;","const API_URL = process.env.NODE_ENV === 'production' \r\n  ? 'https://shipping-management.vercel.app'  // Production API URL\r\n  : 'http://localhost:5000/api/';  // Development API URL\r\n\r\nexport const getApiUrl = (endpoint) => {\r\n  const url = `${API_URL}${endpoint}`;\r\n  console.log('API Request to:', url); // Debug log\r\n  return url;\r\n};\r\n","// Create a dedicated helper for Firebase Auth API calls\r\n\r\nimport { getApiKey } from '../firebase/config';\r\n\r\n// Base endpoints\r\nconst AUTH_BASE_URL = 'https://identitytoolkit.googleapis.com/v1/accounts';\r\n\r\n/**\r\n * Makes a secure call to Firebase Auth REST API\r\n * @param {string} endpoint - The endpoint to call\r\n * @param {Object} data - The data to send\r\n * @returns {Promise<Object>} - The API response\r\n */\r\nexport const callFirebaseAuthApi = async (endpoint, data) => {\r\n  try {\r\n    const apiKey = getApiKey();\r\n    if (!apiKey) throw new Error('API key not available');\r\n    \r\n    const url = `${AUTH_BASE_URL}:${endpoint}?key=${apiKey}`;\r\n    const response = await fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(data)\r\n    });\r\n    \r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error(`Firebase Auth API error (${endpoint}):`, error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// API methods for specific operations\r\nexport const createUser = (email, password) => {\r\n  return callFirebaseAuthApi('signUp', {\r\n    email,\r\n    password,\r\n    returnSecureToken: false\r\n  });\r\n};\r\n\r\nexport const verifyEmail = (email) => {\r\n  return callFirebaseAuthApi('createAuthUri', {\r\n    identifier: email,\r\n    continueUri: window.location.href\r\n  });\r\n};\r\n\r\nexport const sendPasswordReset = (email) => {\r\n  return callFirebaseAuthApi('sendOobCode', {\r\n    requestType: 'PASSWORD_RESET',\r\n    email\r\n  });\r\n};\r\n\r\nexport const verifyPassword = (email, password) => {\r\n  return callFirebaseAuthApi('signInWithPassword', {\r\n    email,\r\n    password,\r\n    returnSecureToken: true\r\n  });\r\n};\r\n"],"names":["ADMIN_EMAILS","Login","console","log","process","REACT_APP_API_URL","email","setEmail","useState","password","setPassword","name","setName","error","setError","showTestSignup","setShowTestSignup","showRegister","setShowRegister","isTestUser","setIsTestUser","isSubmitting","setIsSubmitting","navigate","useNavigate","buttonStyles","py","fontSize","fontWeight","height","textTransform","letterSpacing","transform","transition","outlinedButtonStyles","borderColor","backgroundColor","utilityButtonStyles","color","border","boxShadow","marginRight","minWidth","whiteSpace","sendAdminNotification","async","userData","response","fetch","endpoint","url","getApiUrl","method","headers","body","JSON","stringify","ok","errorData","json","Error","data","_jsx","Container","component","maxWidth","children","_jsxs","Paper","elevation","sx","marginTop","padding","display","flexDirection","alignItems","Avatar","m","bgcolor","LockOutlinedIcon","Typography","variant","mb","Box","onSubmit","e","preventDefault","verifyEmail","registered","existingRequestQuery","query","collection","db","where","existingRequestDocs","getDocs","empty","approvedRequest","docs","find","doc","status","pendingRequest","userRequest","createdAt","Date","toISOString","addDoc","alert","state","message","createUserWithEmailAndPassword","testAuth","localStorage","setItem","signInWithEmailAndPassword","auth","fromTempPassword","includes","pendingQuery","size","userQuery","signOut","removeItem","mt","_Fragment","TextField","margin","required","fullWidth","label","value","onChange","target","position","Tooltip","title","arrow","placement","IconButton","right","top","HelpIcon","Button","type","disabled","CircularProgress","mr","onClick","justifyContent","width","flex","startIcon","SearchIcon","ml","LockResetIcon","Divider","my","callFirebaseAuthApi","apiKey","getApiKey","createUser","returnSecureToken","identifier","continueUri","window","location","href","verifyPassword"],"sourceRoot":""}