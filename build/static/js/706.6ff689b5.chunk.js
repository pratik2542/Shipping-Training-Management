"use strict";(self.webpackChunkddrops=self.webpackChunkddrops||[]).push([[706],{706:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var r=a(5043),i=a(9252),s=a(3336),n=a(1045),o=a(5865),l=a(6446),d=a(5795),c=a(1906),m=a(9336),u=a(9786),h=a(6822),p=a(3216),g=a(6325),x=a(3612),f=a(5472),A=a(5983),w=a(8483),v=a(7392),y=a(1637);var b=a(6360),S=a(9792),j=a(579);const C=["pratikmak2542@gmail.com"],T=()=>{console.log("API URL:",{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBLAlnwwRasaBO88OsM8GsJ0os-8bwAT08"}.REACT_APP_API_URL);const[e,t]=(0,r.useState)(""),[a,T]=(0,r.useState)(""),[P,R]=(0,r.useState)(""),[k,I]=(0,r.useState)(""),[_,W]=(0,r.useState)(!1),[E,O]=(0,r.useState)(!1),[q,z]=(0,r.useState)(!1),[F,U]=(0,r.useState)(!1),B=(0,p.Zp)(),D={py:1.5,fontSize:"1rem",fontWeight:500,height:"48px",textTransform:"none",letterSpacing:"0.3px","&:hover":{transform:"translateY(-2px)",transition:"transform 0.2s"}},J={...D,borderColor:"primary.main","&:hover":{...D["&:hover"],borderColor:"primary.dark",backgroundColor:"rgba(25, 118, 210, 0.04)"}},G={...D,height:"42px",backgroundColor:"white",color:"primary.main",border:"1px solid",borderColor:"primary.light",fontWeight:400,fontSize:"0.9rem",boxShadow:"0 2px 4px rgba(0,0,0,0.05)","& .MuiButton-startIcon":{marginRight:1},"&:hover":{backgroundColor:"primary.main",color:"white",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"},minWidth:130,whiteSpace:"nowrap"},L=async e=>{console.log("Sending notification data:",e);try{const t=await fetch((e=>{const t=`https://shipping-management.vercel.app${e}`;return console.log("API Request to:",t),t})("notify-admin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,email:e.email})});if(!t.ok){const e=await t.json();throw new Error(e.error||"Failed to send notification")}const a=await t.json();return console.log("Server response:",a),a}catch(k){throw console.error("Notification error:",k),new Error("Failed to send registration notification. Please try again.")}};return(0,j.jsx)(i.A,{component:"main",maxWidth:"xs",children:(0,j.jsxs)(s.A,{elevation:3,sx:{marginTop:8,padding:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,j.jsx)(n.A,{sx:{m:1,bgcolor:"primary.main"},children:(0,j.jsx)(g.A,{})}),(0,j.jsx)(o.A,{component:"h1",variant:"h5",sx:{mb:3},children:E?"Register":_?"Create Test Account":"Sign in"}),k&&(0,j.jsx)(o.A,{color:"error",sx:{mb:2},children:k}),(0,j.jsx)(l.A,{component:"form",onSubmit:E?async t=>{if(t.preventDefault(),!F){U(!0),I("");try{const t=`https://identitytoolkit.googleapis.com/v1/accounts:createAuthUri?key=${"AIzaSyBLAlnwwRasaBO88OsM8GsJ0os-8bwAT08"}`,a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,continueUri:window.location.href})});if(!0===(await a.json()).registered)return I("An account with this email already exists. Please log in instead."),void U(!1);const r=(0,f.P)((0,f.rJ)(h.db,"userRequests"),(0,f._M)("email","==",e)),i=await(0,f.GG)(r);if(!i.empty){const e=i.docs.find((e=>"approved"===e.data().status)),t=i.docs.find((e=>"pending"===e.data().status));if(e)return I("This email is already registered and approved. Please log in instead."),void U(!1);if(t)return I("You already have a pending registration request. Please wait for approval."),void U(!1)}const s={name:P,email:e,status:"pending",createdAt:(new Date).toISOString(),isTestUser:!1};await L(s),await(0,f.gS)((0,f.rJ)(h.db,"userRequests"),s),alert("Registration request submitted successfully."),B("/pending-status",{state:{email:e}})}catch(k){console.error("Registration failed:",k),I(`Registration failed: ${k.message}`)}finally{U(!1)}}}:_?async t=>{t.preventDefault();try{await(0,u.eJ)(x.z,e,a),localStorage.setItem("isTestUser","true"),B("/dashboard")}catch(k){I(k.message)}}:async t=>{t.preventDefault();try{if(await(0,u.x9)(h.j,e,a),"tempPassword123"===a)return void B("/reset-password",{state:{fromTempPassword:!0}});if(C.includes(e)){localStorage.setItem("adminEmail",e),localStorage.setItem("isAdmin","true");const t=(0,f.P)((0,f.rJ)(h.db,"userRequests"),(0,f._M)("status","==","pending"));return void((await(0,f.GG)(t)).size>0?B("/admin/verify"):B("/dashboard"))}if(q)await(0,u.x9)(x.z,e,a),localStorage.setItem("isTestUser","true");else{await(0,u.x9)(h.j,e,a);const t=(0,f.P)((0,f.rJ)(h.db,"userRequests"),(0,f._M)("email","==",e),(0,f._M)("status","==","pending"));if(!(await(0,f.GG)(t)).empty)return await h.j.signOut(),void I("Your account is pending approval. Please wait for admin verification.");localStorage.removeItem("isAdmin"),localStorage.removeItem("isTestUser"),B("/dashboard")}}catch(k){I(k.message)}},sx:{mt:1},children:E?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(d.A,{margin:"normal",required:!0,fullWidth:!0,label:"Full Name",value:P,onChange:e=>R(e.target.value),sx:{mb:2}}),(0,j.jsxs)(l.A,{sx:{position:"relative"},children:[(0,j.jsx)(d.A,{margin:"normal",required:!0,fullWidth:!0,label:"Email Address",value:e,onChange:e=>t(e.target.value),sx:{mb:3}}),(0,j.jsx)(w.A,{title:"After your registration is approved, you'll receive an email with a temporary password to log in.",arrow:!0,placement:"top",children:(0,j.jsx)(v.A,{sx:{position:"absolute",right:-40,top:"50%",transform:"translateY(-50%)"},children:(0,j.jsx)(A.A,{color:"primary",fontSize:"small"})})})]}),(0,j.jsx)(c.A,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{...D,mt:3,mb:2},disabled:F,children:F?(0,j.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,j.jsx)(y.A,{size:24,sx:{mr:1}}),"Registering..."]}):"Register"}),(0,j.jsx)(c.A,{fullWidth:!0,variant:"outlined",onClick:()=>{O(!1),R("")},sx:{...J,mt:1},children:"Back to Login"})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(d.A,{margin:"normal",required:!0,fullWidth:!0,label:"Email Address",value:e,onChange:e=>t(e.target.value),sx:{mb:2}}),(0,j.jsx)(d.A,{margin:"normal",required:!0,fullWidth:!0,label:"Password",type:"password",value:a,onChange:e=>T(e.target.value),sx:{mb:3}}),_||E?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.A,{type:"submit",fullWidth:!0,variant:"contained",color:"warning",sx:{...D,mt:3,mb:2},children:"Create Test Account"}),(0,j.jsx)(c.A,{fullWidth:!0,variant:"outlined",onClick:()=>{W(!1),z(!1)},sx:{...J,mt:1},children:"Back to Login"})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.A,{type:"submit",fullWidth:!0,variant:"contained",sx:D,children:"Sign In"}),(0,j.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",mt:3,mb:3,width:"100%"},children:[(0,j.jsx)(c.A,{sx:{...G,flex:"1 1 45%",mr:1},onClick:()=>B("/check-status"),startIcon:(0,j.jsx)(b.A,{sx:{fontSize:20}}),children:"Check Status"}),(0,j.jsx)(c.A,{sx:{...G,flex:"1 1 45%",ml:1},onClick:()=>B("/forgot-password"),startIcon:(0,j.jsx)(S.A,{sx:{fontSize:20}}),children:"Reset Password"})]}),(0,j.jsx)(m.A,{sx:{my:2},children:(0,j.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"or"})}),(0,j.jsx)(c.A,{fullWidth:!0,variant:"outlined",onClick:()=>O(!0),sx:{...J,mb:1},children:"Create Account"}),(0,j.jsx)(c.A,{fullWidth:!0,variant:"outlined",onClick:()=>{W(!0),z(!0)},sx:J,children:"Create Test Account"})]})]})})]})})}}}]);
//# sourceMappingURL=706.6ff689b5.chunk.js.map