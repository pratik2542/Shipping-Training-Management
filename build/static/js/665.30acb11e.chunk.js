"use strict";(self.webpackChunkddrops=self.webpackChunkddrops||[]).push([[665],{9665:(e,r,t)=>{t.r(r),t.d(r,{default:()=>C});var s=t(5043),n=t(9252),a=t(6446),i=t(5865),o=t(1906),l=t(794),c=t(4194),d=t(3336),m=t(8739),x=t(3216),h=t(2991),u=t(5065),g=t(1702),p=t(6380),f=t(1571),A=t(9786),j=t(5472),v=t(6822),y=t(3612),b=t(579);const C=()=>{const e=(0,x.Zp)(),[r,t]=(0,s.useState)(!1),[C,S]=(0,s.useState)(0),[w,k]=(0,s.useState)(!1),[z,U]=(0,s.useState)("");(0,s.useEffect)((()=>{(async()=>{const e="true"===localStorage.getItem("isTestUser"),r=e?y.z.currentUser:v.j2.currentUser;if(r)if(e)U(r.email.split("@")[0]);else{const e=(0,j.P)((0,j.rJ)(v.db,"userRequests"),(0,j._M)("email","==",r.email),(0,j._M)("status","==","approved"));try{const r=await(0,j.GG)(e);if(!r.empty){const e=r.docs[0].data();U(e.name||"User")}}catch(t){console.error("Error fetching user name:",t),U("User")}}})();(async()=>{const e="true"===localStorage.getItem("isTestUser");if("true"===localStorage.getItem("isAdmin")&&!e){t(!0);const e=(0,j.P)((0,j.rJ)(v.db,"userRequests"),(0,j._M)("status","==","pending")),r=(await(0,j.GG)(e)).size;S(r),k(r>0)}})()}),[]);return(0,b.jsxs)(n.A,{maxWidth:"md",children:[(0,b.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2},children:[(0,b.jsxs)(i.A,{variant:"h6",color:"primary",children:["Welcome, ",z]}),(0,b.jsx)(o.A,{variant:"outlined",color:"primary",startIcon:(0,b.jsx)(g.A,{}),onClick:async()=>{try{"true"===localStorage.getItem("isTestUser")?(await(async()=>{try{const e=(await(0,j.GG)((0,j.rJ)(y.B,"test_shipments"))).docs.map((e=>(0,j.kd)(e.ref)));await Promise.all(e);const r=y.z.currentUser;r&&await r.delete(),console.log("Test data cleanup completed")}catch(e){console.error("Error cleaning up test data:",e)}})(),await(0,A.CI)(y.z)):await(0,A.CI)(v.j2),localStorage.removeItem("isTestUser"),e("/")}catch(r){console.error("Error during logout:",r),localStorage.removeItem("isTestUser"),e("/")}},children:"Logout"})]}),(0,b.jsx)(i.A,{variant:"h4",component:"h1",sx:{textAlign:"center",mt:4,mb:4,fontWeight:600,color:"primary.main"},children:"Shipping Management Dashboard"}),(0,b.jsx)(l.A,{open:w,autoHideDuration:6e3,onClose:()=>k(!1),anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,b.jsxs)(c.A,{severity:"info",onClose:()=>k(!1),sx:{width:"100%"},children:[C," user registration ",1===C?"request":"requests"," pending approval"]})}),(0,b.jsxs)(a.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr 1fr"},gap:3,padding:2},children:[(0,b.jsxs)(d.A,{elevation:3,sx:{p:3,textAlign:"center",transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)"}},children:[(0,b.jsx)(h.A,{sx:{fontSize:60,color:"primary.main",mb:2}}),(0,b.jsx)(i.A,{variant:"h6",sx:{mb:2},children:"Create New Shipment"}),(0,b.jsx)(o.A,{variant:"contained",size:"large",fullWidth:!0,onClick:()=>e("/shipping-form"),sx:{mt:2},children:"Create Form"})]}),(0,b.jsxs)(d.A,{elevation:3,sx:{p:3,textAlign:"center",transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)"}},children:[(0,b.jsx)(u.A,{sx:{fontSize:60,color:"primary.main",mb:2}}),(0,b.jsx)(i.A,{variant:"h6",sx:{mb:2},children:"View Shipments"}),(0,b.jsx)(o.A,{variant:"contained",size:"large",fullWidth:!0,onClick:()=>e("/records"),sx:{mt:2},children:"View Records"})]}),(0,b.jsxs)(d.A,{elevation:3,sx:{p:3,textAlign:"center",transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)"}},children:[(0,b.jsx)(p.A,{sx:{fontSize:60,color:"primary.main",mb:2}}),(0,b.jsx)(i.A,{variant:"h6",sx:{mb:2},children:"Manufacturing"}),(0,b.jsx)(o.A,{variant:"contained",size:"large",fullWidth:!0,onClick:()=>e("/manufacturing"),sx:{mt:2},children:"Manufacturing"})]})]}),r&&(0,b.jsxs)(a.A,{sx:{mt:4},children:[(0,b.jsx)(i.A,{variant:"h5",sx:{mb:3,color:"secondary.main",fontWeight:600,textAlign:"center"},children:"Admin Controls"}),(0,b.jsxs)(d.A,{elevation:3,sx:{p:3,textAlign:"center",transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)"},backgroundColor:"secondary.light"},children:[(0,b.jsx)(f.A,{sx:{fontSize:60,color:"secondary.main",mb:2}}),(0,b.jsxs)(i.A,{variant:"h6",sx:{mb:2,color:"white"},children:["User Verification",C>0&&(0,b.jsx)(m.A,{badgeContent:C,color:"error",sx:{ml:2}})]}),(0,b.jsxs)(o.A,{variant:"contained",size:"large",fullWidth:!0,onClick:()=>e("/admin/verify"),sx:{mt:2,backgroundColor:"secondary.dark","&:hover":{backgroundColor:"secondary.main"}},children:["Manage Users",C>0&&` (${C} Pending)`]})]})]})]})}}}]);
//# sourceMappingURL=665.30acb11e.chunk.js.map