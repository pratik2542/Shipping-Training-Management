"use strict";(self.webpackChunkddrops=self.webpackChunkddrops||[]).push([[640],{640:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(5043),r=a(7872),i=a(3336),m=a(5865),s=a(6446),l=a(8903),u=a(7424),o=a(1906),c=a(5472),d=a(6822),p=a(3612),x=a(3216),b=a(579);const h=e=>{let{formTitle:t,components:a,collectionName:h}=e;const g=(0,x.Zp)(),[f,y]=(0,n.useState)({dpNumber:"",manufacturingDate:"",components:a.reduce(((e,t)=>({...e,[t.name]:{lotNumber:"",itemNumber:"",expDate:"",releaseDate:"",quantity:""}})),{})}),D=(0,n.useCallback)((async()=>{const e="true"===localStorage.getItem("isTestUser")?p.B:d.db,t=(new Date).getFullYear().toString().slice(-2);try{const a=["shipments","manufacturing_vitamin_d","manufacturing_menthol","manufacturing_dha","manufacturing_tummy_relief","manufacturing_vitamin_dk"];let n=0;for(const t of a){const a=(0,c.P)((0,c.rJ)(e,t),(0,c.My)("dpNumber","desc"),(0,c.AB)(1)),r=await(0,c.GG)(a);if(!r.empty){const e=r.docs[0].data(),t=parseInt(e.dpNumber.slice(-3));t>n&&(n=t)}}return`DP${t}${(n+1).toString().padStart(3,"0")}`}catch(a){return console.error("Error generating DP number:",a),`DP${t}001`}}),[]);(0,n.useEffect)((()=>{(async()=>{const e=await D();y((t=>({...t,dpNumber:e})))})()}),[D]);const A=(e,t,a)=>{y(e?n=>({...n,components:{...n.components,[e]:{...n.components[e],[t]:a}}}):e=>({...e,[t]:a}))};return(0,b.jsx)(r.A,{maxWidth:"lg",children:(0,b.jsxs)(i.A,{elevation:3,sx:{p:4,mt:4,mb:4},children:[(0,b.jsx)(m.A,{variant:"h4",sx:{mb:4,textAlign:"center",color:"primary.main"},children:t}),(0,b.jsx)(s.A,{component:"form",onSubmit:async e=>{e.preventDefault();try{const e="true"===localStorage.getItem("isTestUser")?p.B:d.db;await(0,c.gS)((0,c.rJ)(e,h),{...f,createdAt:(new Date).toISOString(),isTestData:"true"===localStorage.getItem("isTestUser")}),alert("Manufacturing form submitted successfully!"),g("/manufacturing")}catch(t){console.error("Error submitting form:",t),alert("Error submitting form. Please try again.")}},children:(0,b.jsxs)(l.Ay,{container:!0,spacing:3,children:[(0,b.jsx)(l.Ay,{item:!0,xs:12,sm:6,children:(0,b.jsx)(u.A,{fullWidth:!0,disabled:!0,label:"DP Number",value:f.dpNumber})}),(0,b.jsx)(l.Ay,{item:!0,xs:12,sm:6,children:(0,b.jsx)(u.A,{fullWidth:!0,required:!0,type:"date",name:"manufacturingDate",label:"Manufacturing Date",InputLabelProps:{shrink:!0},value:f.manufacturingDate,onChange:e=>A(null,"manufacturingDate",e.target.value)})}),a.map((e=>(0,b.jsxs)(l.Ay,{item:!0,xs:12,children:[(0,b.jsx)(m.A,{variant:"h6",sx:{mt:2,mb:2},children:e.name}),(0,b.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,b.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,b.jsx)(u.A,{fullWidth:!0,required:!0,label:"Lot Number",value:f.components[e.name].lotNumber,onChange:t=>A(e.name,"lotNumber",t.target.value)})}),(0,b.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,b.jsx)(u.A,{fullWidth:!0,required:!0,label:"Item Number",value:f.components[e.name].itemNumber,onChange:t=>A(e.name,"itemNumber",t.target.value)})}),(0,b.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,b.jsx)(u.A,{fullWidth:!0,required:!0,type:"date",label:"Expiry Date",InputLabelProps:{shrink:!0},value:f.components[e.name].expDate,onChange:t=>A(e.name,"expDate",t.target.value)})}),(0,b.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,b.jsx)(u.A,{fullWidth:!0,required:!0,type:"date",label:"Release Date",InputLabelProps:{shrink:!0},value:f.components[e.name].releaseDate,onChange:t=>A(e.name,"releaseDate",t.target.value)})}),(0,b.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,b.jsx)(u.A,{fullWidth:!0,required:!0,type:"number",label:"Quantity",value:f.components[e.name].quantity,onChange:t=>A(e.name,"quantity",t.target.value)})})]})]},e.name))),(0,b.jsx)(l.Ay,{item:!0,xs:12,children:(0,b.jsxs)(s.A,{sx:{display:"flex",gap:2,mt:4},children:[(0,b.jsx)(o.A,{variant:"outlined",onClick:()=>g("/manufacturing"),fullWidth:!0,children:"Back"}),(0,b.jsx)(o.A,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Submit Form"})]})})]})})]})})},g=[{name:"Vitamin D3",fields:["lotNumber","itemNumber","expDate","releaseDate","quantity"]},{name:"Medium Chain Triglycerides",fields:["lotNumber","itemNumber","expDate","releaseDate","quantity"]},{name:"Tocopherol",fields:["lotNumber","itemNumber","expDate","releaseDate","quantity"]},{name:"Sunflower Oil",fields:["lotNumber","itemNumber","expDate","releaseDate","quantity"]},{name:"Mixed Tocopherols",fields:["lotNumber","itemNumber","expDate","releaseDate","quantity"]}],f=()=>(0,b.jsx)(h,{formTitle:"Vitamin D Manufacturing Form",components:g,collectionName:"manufacturing_vitamin_d"})}}]);
//# sourceMappingURL=640.85bd2847.chunk.js.map